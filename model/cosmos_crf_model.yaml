id: https://www.cdisc.org/cosmos/crf_v1.0
name: COSMoS-Biomedical-Concepts-CRF-Schema

prefixes:
  linkml: https://w3id.org/linkml/
  cosmos_crf: https://www.cdisc.org/cosmos/crf_v1.0
  NCIT: http://purl.obolibrary.org/obo/NCIT_

imports:
  - linkml:types

default_prefix: cosmos_crf
default_range: string

classes:

  CRFGroup:
    tree_root: true
    slots:
      - packageDate
      - packageType
      - crfSpecializationId
      - shortName
      - standard
      - standardStartVersion
      - standardEndVersion
      - implementationOption
      - scenario
      - categories
      - domain
      - biomedicalConceptId
      - sdtmDatasetSpecializationId
      - items

  CRFItem:
    slots:
      - name
      - variableName
      - dataElementConceptId
      - questionText
      - prompt
      - completionInstructions
      - orderNumber
      - mandatoryVariable
      - dataType
      - length
      - significantDigits
      - displayHidden
      - derivedVariable
      - derivationDescription
      - codelist
      - valueList
      - selectionType
      - prepopulatedValue
      - sdtmTarget

  ListValue:
    slots:
      - displayValue
      - value
    slot_usage:
      displayValue:
        description: CDISC submission value for the CRF item
        required: true
        aliases:
          - value_display_list
      value:
        description: User-friendly display value for the CRF item
        required: false
        aliases:
          - value_list

  PrepopulatedValue:
    slots:
      - value
      - conceptId
    slot_usage:
      value:
        description: Submission value for pre-populated term in NCIt
        required: true
        aliases:
          - prepopulated_term
      conceptId:
        description: C-code for pre-populated term in NCIt
        required: false
        aliases:
          - prepopulated_code

  CodeList:
    slots:
      - submissionValue
      - conceptId
      - href
    slot_usage:
      submissionValue:
        required: true
        description: CDISC submission value for the codelist
        aliases:
          - codelist_submission_value
      conceptId:
        description: C-code for codelist in NCIt
        aliases:
          - codelist
      href:
        description: Link to NCIt for the codelist
        aliases:
          - codelist_uri

  SDTMTarget:
    slots:
      - sdtmAnnotation
      - sdtmVariables
      - sdtmTargetMapping

slots:

  packageDate:
    description: Biomedical Concept package release date indicating when the BC package was published to production
    range: date
    required: true
    aliases:
      - package_date
  packageType:
    description: Package type for CRF specializations (crf)
    range: PackageTypeEnum
    required: true
    aliases:
      - package_type
  crfSpecializationId:
    description: Identifier for CRF specialization group
    identifier: true
    range: string
    pattern: "^[A-Z][A-Z0-9_]*$"
    required: true
    aliases:
      - crf_group_id
  shortName:
    description: Short name which provides a user friendly and intuitive name for the CRF group
    range: string
    required: true
    aliases:
      - short_name
  standard:
    description: Standard for the CRF specialization group
    range: string
    required: true
    aliases:
      - standard
  standardStartVersion:
    description: The earliest CRF IG version applicable to the CRF specialization
    range: string
    required: true
    aliases:
      - standard_start_version
  standardEndVersion:
    description: The last CRF IG version that is applicable to the CRF specialization
    range: string
    aliases:
      - standard_end_version
  implementationOption:
    description: Implementation option for the CRF specialization group
    range: ImplementationOptionEnum
    aliases:
      - implementation_option
  scenario:
    description: Scenario for the CRF specialization group
    range: string
    aliases:
      - scenario
  categories:
    description: CRF Dataset Specialization category for the faciliation of API search and extract
    range: string
    multivalued: true
    inlined_as_list: true
  domain:
    description: Domain for the CRF specialization group
    range: string
  biomedicalConceptId:
    description: Biomedical Concept identifier foreign key
    range: string
    pattern: "^(C[0-9]+|NEW_[A-Z]*[0-9]*)$"
    recommended: true
    aliases:
      - bc_id
  sdtmDatasetSpecializationId:
    description: Identifier for SDTM Dataset Specialization group
    range: string
    pattern: "^[A-Z][A-Z0-9_]*$"
    aliases:
      - vlm_group_id
  items:
    description: Items included in the CRF specialization
    range: CRFItem
    required: true
    multivalued: true
    inlined_as_list: true

  name:
    description: Item name as it appears on the CRF instrument
    identifier: true
    range: string
    pattern: "^[A-Z][A-Z0-9_]*$"
    aliases:
      - crf_item
  variableName:
    description: Variable name of the CRF item for which data are being collected.
    range: string
    pattern: "^[A-Z][A-Z0-9_]*$"
    required: true
    aliases:
      - variable_name
  dataElementConceptId:
    description: Biomedical Concept Data Element Concept identifier foreign key
    range: string
    pattern: "^(C[0-9]+|NEW_[A-Z]*[0-9]*)$"
    aliases:
      - dec_id
  questionText:
    description: Item question text
    range: string
    aliases:
      - question_text
  prompt:
    description: Item prompt
    range: string
    aliases:
      - prompt
  completionInstructions:
    description: Item completion instructions
    range: string
    aliases:
      - completion_instructions
  orderNumber:
    description: Item order number
    range: integer
    required: true
    aliases:
      - order_number
  mandatoryVariable:
    description: Indicator that the item must be present within the CRF group
    range: boolean
    required: true
    aliases:
      - mandatory_variable
  dataType:
    description: Item data type
    range: CRFItemDataTypeEnum
    required: true
    aliases:
      - data_type
  length:
    description: Item length
    range: integer
    minimum_value: 1
    aliases:
      - length
  significantDigits:
    description: Item significant_digits
    range: integer
    aliases:
      - significant_digits
  displayHidden:
    description: Indicator that the item is hidden from the user
    range: boolean
    aliases:
      - display_hidden
  derivedVariable:
    description: Indicator that variable is derived
    range: boolean
  derivationDescription:
    description: Description of the derivation. Required when derivedVariable is true.
    range: string
  codelist:
    description: Codelist
    range: CodeList
    inlined: true
  valueList:
    description: A set of values for a CRF item
    range: ListValue
    multivalued: true
    inlined_as_list: true
  selectionType:
    description: Type of selection used for set-up of the CRF instrument
    range: SelectionTypeEnum
    aliases:
      - selection_type
  prepopulatedValue:
    description: Pre-populated value for the CRF instrument
    range: PrepopulatedValue

  conceptId:
    description: C-code for codelist or term in NCIt
    range: string
    pattern: "^(C[0-9]+)$"
  href:
    description: Link to NCIt for the codelist or term
    range: uri
  submissionValue:
    description: CDISC submission value
    range: string
    pattern: "^[A-Z][A-Z0-9_]*$"
    required: true
  displayValue:
    description: User-friendly display value for the CRF item
    range: string
    required: true
  value:
    description: CDISC submission value for the CRF item
    range: string

  sdtmTarget:
    description: SDTM target variables for CRF item variable
    range: SDTMTarget
  sdtmAnnotation:
    description: Annotation of the SDTM target in the CRF instrument
    range: string
    recommended: true
    aliases:
      - sdtm_annotation
  sdtmVariables:
    description: SDTM target variable for CRF item variable
    range: string
    multivalued: true
    inlined_as_list: true
    aliases:
      - sdtm_target_variable
  sdtmTargetMapping:
    description: Rule for mapping from CRF item to SDTM target variable.
    range: string
    aliases:
      - sdtm_mapping

enums:

  PackageTypeEnum:
    permissible_values:
      crf:

  ImplementationOptionEnum:
    permissible_values:
      Normalized:
      Denormalized:

  CRFItemDataTypeEnum:
    permissible_values:
      decimal:
        title: decimal
      float:
        title: float
      integer:
        title: integer
      text:
        title: text
      date:
        title: date
      time:
        title: time

  SelectionTypeEnum:
    permissible_values:
      Multiple:
      Single:


